<!DOCTYPE html>
<html><head>
<meta charset="utf-8">
<title>Universal Runner • connectOS</title>
<style>
  body{background:#000;color:#0f0;font-family:system-ui;padding:20px}
  button{background:#0f0;color:#000;border:none;padding:15px;margin:10px 0;width:100%;font-size:18px}
  input[type=file]{display:none}
  .drop{background:#111;border:2px dashed #0f0;padding:40px;text-align:center;margin:20px 0}
</style>
</head>
<body>

<h1>Universal Runner</h1>
<p>Arraste qualquer arquivo do planeta aqui:</p>
<div class="drop" id="drop">
  .exe · .apk · .deb · .zip · .gb · .nds · .psp · .py · .html · qualquer coisa
</div>

<button onclick="document.getElementById('file').click()">Escolher arquivo</button>
<input type="file" id="file" onchange="run(event)">

<script>
const drop = document.getElementById('drop')
drop.ondragover = e => e.preventDefault()
drop.ondrop = e => { e.preventDefault(); run(e.dataTransfer.files[0]) }

function run(file) {
  const name = file.name.toLowerCase()
  const url = URL.createObjectURL(file)
  
  nexusSpeak(`Recebi ${name}. Deixa comigo...`)
  
  if (name.endsWith('.exe') || name.endsWith('.dll')) {
    nexusSpeak("Executável Windows detectado. Rodando via WebAssembly + Box86...")
    openApp('runtimes/wine-wasm.html?file=' + url)
  }
  else if (name.endsWith('.apk')) {
    nexusSpeak("APK Android. Instalando em sandbox seguro...")
    openApp('runtimes/apk-runner.html?file=' + url)
  }
  else if (name.endsWith('.deb') || name.endsWith('.rpm')) {
    nexusSpeak("Pacote Linux. Instalando no PRoot...")
    openApp('runtimes/deb-installer.html?file=' + url)
  }
  else if (name.endsWith('.py')) {
    nexusSpeak("Script Python. Executando agora...")
    openApp('runtimes/python.html?script=' + url)
  }
  else if (name.endsWith('.gb') || name.endsWith('.nds') || name.endsWith('.iso')) {
    nexusSpeak("Jogo retro detectado. Abrindo emulador...")
    openApp('runtimes/retroarch.html?rom=' + url)
  }
  else {
    nexusSpeak("Não reconheço ainda, mas vou tentar abrir mesmo assim...")
    window.open(url)
  }
}

function nexusSpeak(text){ parent.postMessage({type:'nexus',text},'*') }
</script>
</body></html>
