<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="utf-8">
  <title>connectOS • live</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>∞</text></svg>">
  <style>
    body,html{margin:0;height:100%;background:#000;color:#0f0;font-family:monospace}
    #terminal{width:100%;height:100%}
  </style>
</head>
<body>
  <div id="terminal"></div>

  <script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.8.0/lib/xterm-addon-fit.js"></script>
  <script type="module">
    import { Terminal } from 'https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.js';
    import { FitAddon } from 'https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.8.0/lib/xterm-addon-fit.js';
    
    const term = new Terminal({theme:{background:'#000',foreground:'#0f0'}});
    const fit = new FitAddon();
    term.loadAddon(fit);
    term.open(document.getElementById('terminal'));
    fit.fit();

    const PHI = 1.61803398874989;
    let scale = 1;

    function phiAdapt() {
      const w = window.innerWidth;
      const h = window.innerHeight;
      scale = w < 500 ? 0.8 : w > 1500 ? 1.5 : 1;
      term.writeln("\r\n∞ connectOS • Φ-adaptive live shell");
      term.writeln(`Resolution: \( {w}× \){h} • Φ-scale: ${scale.toFixed(2)}`);
      term.writeln("Type 'help' • Python/Qiskit ready • Offline-capable");
      term.prompt();
    }

    term.prompt = () => term.write("\r\nφ> ");
    term.writeln("Booting connectOS web shell...");
    phiAdapt();

    window.addEventListener('resize', () => { fit.fit(); phiAdapt(); });

    // Simula shell básico (pode conectar com WebAssembly + emscripten depois)
    term.onData(data => {
      if (data === '\r') {
        term.writeln('');
        term.prompt();
      } else if (data === '\u007f') { // backspace
        if (term._core.buffer.x > 4) term.write('\b \b');
      } else {
        term.write(data);
      }
    });
  </script>
</body>
</html>
